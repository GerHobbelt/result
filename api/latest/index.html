<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Result: Result</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Result
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Result </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/bitwizeshift/result/actions?query=workflow%3AUbuntu"></a> <a href="https://github.com/bitwizeshift/result/actions?query=workflow%3AmacOS"></a> <a href="https://github.com/bitwizeshift/result/actions?query=workflow%3AWindows"></a> <a href="https://www.codacy.com/gh/bitwizeshift/result/dashboard?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=bitwizeshift/result&amp;amp;utm_campaign=Badge_Grade"></a> <a href="https://coveralls.io/github/bitwizeshift/result?branch=master"></a> <a href="http://github.com/bitwizeshift/result/issues"></a> <br />
 <a href="https://github.com/bitwizeshift/result/releases"></a> <a href="https://bintray.com/bitwizeshift/Result/Result%3Aresult/_latestVersion"></a> <br />
 <a href="https://godbolt.org/z/nKfqbK"></a></p>
<p><b>Result</b> is a modern, simple, and light-weight error-handling alternative to exceptions.</p>
<h2>Teaser</h2>
<div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> To, <span class="keyword">typename</span> From&gt;</div><div class="line"><span class="keyword">auto</span> try_narrow(<span class="keyword">const</span> From&amp; from) noexcept -&gt; cpp::result&lt;To,narrow_error&gt;</div><div class="line">{</div><div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> to = <span class="keyword">static_cast&lt;</span>To<span class="keyword">&gt;</span>(from);</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span> ((to &lt; To{}) != (from &lt; From{})) {</div><div class="line">    <span class="keywordflow">return</span> cpp::fail(narrow_error::sign_change);</div><div class="line">  }</div><div class="line">  <span class="keywordflow">if</span> (static_cast&lt;From&gt;(to) != from) {</div><div class="line">    <span class="keywordflow">return</span> cpp::fail(narrow_error::loss_of_data);</div><div class="line">  }</div><div class="line">  <span class="keywordflow">return</span> to;</div><div class="line">}</div></div><!-- fragment --><p><code><a href="https://godbolt.org/z/nKfqbK">Live Example</a></code></p>
<h2>Features</h2>
<ul>
<li>[x] Offers a coherent, light-weight alternative to exceptions</li>
<li>[x] Compatible with <code>C++11</code> (with more features in <code>C++14</code> and <code>C++17</code>)</li>
<li>[x] Single-header, <b>header-only</b> solution &ndash; easily drops into any project</li>
<li>[x] Zero overhead abstractions &ndash; don't pay for what you don't use.</li>
<li>[x] No dependencies</li>
<li>[x] Support for value-type, reference-type, and <code>void</code>-type values in <code>result</code></li>
<li>[x] Monadic composition functions like <code>map</code>, <code>flat_map</code>, and <code>map_error</code> for easy functional use</li>
<li>[x] <a href="https://coveralls.io/github/bitwizeshift/result?branch=master">Comprehensively unit tested</a> for both static behavior and runtime validation</li>
<li>[x] <a href="https://godbolt.org/z/M69T4v">Incurs minimal cost when optimized</a>, especially for trivial types</li>
</ul>
<p>For more details and examples on what is available in <b>Result</b>, please check out the tutorial section.</p>
<p>For details describing how this implementation deviates from the <code>std::result</code> proposals, see this page.</p>
<h2>Documentation</h2>
<ul>
<li><a href="#background">Background</a> \ A background on the problem <b>Result</b> solves</li>
<li>Installation \ For a quick guide on how to install/use this in other projects</li>
<li>Tutorial \ A quick pocket-guide to using <b>Result</b></li>
<li>Examples \ Some preset live-examples of this library in use</li>
<li><a href="https://bitwizeshift.github.io/result/api/latest/">API Reference</a> \ For doxygen-generated API information</li>
<li>Attribution \ Information about how to attribute this project</li>
<li>FAQ \ A list of frequently asked questions</li>
</ul>
<h2>Background</h2>
<p>Error cases in C++ are often difficult to discern from the API. Any function not marked <code>noexcept</code> can be assumed to throw an exception, but the exact <em>type</em> of exception, and if it even derives from <code>std::exception</code>, is ambiguous. Nothing in the language forces which exceptions may propagate from an API, which can make dealing with such APIs complicated.</p>
<p>Often it is more desirable to achieve <code>noexcept</code> functions where possible, since this allows for better optimizations in containers (e.g. optimal moves/swaps) and less cognitive load on consumers.</p>
<p>Having a <code>result&lt;T, E&gt;</code> type on your API not only semantically encodes that a function is <em>able to</em> fail, it also indicates to the caller <em>how</em> the function may fail, and what discrete, testable conditions may cause it to fail &ndash; which is what this library intends to solve.</p>
<p>As a simple example, compare these two identical functions:</p>
<div class="fragment"><div class="line"><span class="comment">// (1)</span></div><div class="line"><span class="keyword">auto</span> to_uint32(<span class="keyword">const</span> std::string&amp; x) -&gt; std::uint32_t;</div><div class="line"></div><div class="line"><span class="comment">// (2)</span></div><div class="line"><span class="keyword">enum class</span> parse_error { overflow=1, underflow=2, bad_input=3};</div><div class="line"><span class="keyword">auto</span> to_uint32(<span class="keyword">const</span> std::string&amp; x) noexcept -&gt; result&lt;std::uint32_t,parse_error&gt;;</div></div><!-- fragment --><p>In <code>(1)</code>, it is ambiguous <em>what</em> (if anything) this function may throw on failure, or how this error case may be accounted for.</p>
<p>In <code>(2)</code>, on the other hand, it is explicit that <code>to_uint32</code> <em>cannot</em> throw &ndash; so there is no need for a <code>catch</code> handler. It's also clear that it may fail for whatever reasons are in <code>parse_error</code>, which discretely enumerates any possible case for failure.</p>
<h2>Optional Features</h2>
<p>Although not required or enabled by default, <b>Result</b> supports two optional features that may be controlled through preprocessor symbols:</p>
<ol type="1">
<li>Using a custom namespace, and</li>
<li>Disabling all exceptions</li>
</ol>
<h3>Using a Custom Namespace</h3>
<p>The <code>namespace</code> that <code>result</code> is defined in is configurable. By default, it is defined in <code>namespace cpp</code>; however this can be toggled by defining the preprocessor symbol <code>RESULT_NAMESPACE</code> to be the name of the desired namespace.</p>
<p>This could be done either through a <code>#define</code> preprocessor directive:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define RESULT_NAMESPACE example</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="de/d80/result_8hpp.html">result.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">auto</span> test() -&gt; example::result&lt;int,int&gt;;</div></div><!-- fragment --><p><code><a href="https://godbolt.org/z/a4GccT">Try Online</a></code></p>
<p>Or it could also be defined using the compile-time definition with <code>-D</code>, such as:</p>
<p><code>g++ -std=c++11 -DRESULT_NAMESPACE=example test.cpp</code></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="de/d80/result_8hpp.html">result.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">auto</span> test() -&gt; example::result&lt;int,int&gt;;</div></div><!-- fragment --><p><code><a href="https://godbolt.org/z/5xTsdj">Try Online</a></code></p>
<h3>Disabling Exceptions</h3>
<p>Since <code>result</code> serves to act as an orthogonal/alternative error-handling mechanism to exceptions, it may be desirable to not have <em>any</em> exceptions at all. IF the compiler has been configured to disable exception entirely, simply having a path that even encounters a <code>throw</code> &ndash; even if never reached in practice may trigger compile errors.</p>
<p>To account for this possibility, <b>Result</b> may have exceptions removed by defining the preprocessor symbol <code>RESULT_DISABLE_EXCEPTIONS</code>.</p>
<p>Note that if this is done, contract-violations will now behave differently:</p>
<ul>
<li>Contract violations will call <code>std::abort</code>, causing immediate termination (and often, core-dumps for diagnostic purposes)</li>
<li>Contract violations will print directly to <code>stderr</code> to allow context for the termination</li>
<li>Since exceptions are disabled, there is no way to perform a proper stack unwinding &ndash; so destructors will <em>not be run</em>. There is simply no way to allow for proper RAII cleanup without exceptions in this case.</li>
</ul>
<p><code><a href="https://godbolt.org/z/bjbqaG">Try Online</a></code></p>
<h2>Building the Unit Tests</h2>
<p>Building the unit tests are not necessary to use this project. However, if you are interested in running these yourself, you will require the following installed:</p>
<ul>
<li><a href="https://cmake.org">CMake</a>: Used for configuring/building the project</li>
<li><a href="https://github.com/catchorg/Catch2">Catch2</a>: the unit-test library</li>
</ul>
<p>Additionally, you will need to toggle the <code>RESULT_COMPILE_UNIT_TESTS</code> option during cmake configuration to ensure that unit tests configure and build.</p>
<p>The easiest way to install Catch2 is using the <a href="https://conan.io/index.html"><code>conan</code></a> package manager and installing with <code>conan install &lt;path to conanfile&gt;</code> from your build directory.</p>
<p>A complete example of configuring, compiling, and running the tests:</p>
<div class="fragment"><div class="line"># Make the build directory and enter it</div><div class="line">mkdir build &amp;&amp; cd build</div><div class="line"># Install Catch with conan (optional)</div><div class="line">conan install ..</div><div class="line"># Configure the project</div><div class="line">cmake .. -DRESULT_COMPILE_UNIT_TESTS=On</div><div class="line"># Build everything</div><div class="line">cmake --build .</div><div class="line"># run the tests</div><div class="line">cmake --build . --target test</div></div><!-- fragment --><h2>Compiler Compatibility</h2>
<p><b>Result</b> is compatible with any compiler capable of compiling valid <code>C++11</code>. Specifically, this has been tested and is known to work with:</p>
<ul>
<li>GCC 5, 6, 7, 8, 9, 10</li>
<li>Clang 3.5, 3.6, 3.7, 3.8, 3.9, 4, 5, 6, 7, 8, 9, 10, 11</li>
<li>Apple Clang (Xcode) 10.3, 11.2, 11.3, 12.3</li>
<li>Visual Studio 2015, 2017, 2019</li>
</ul>
<p>Latest patch level releases are assumed in the versions listed above.</p>
<h2>License</h2>
<div class="image">
<img src="http://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png" align="right"/>
</div>
<p><b>Result</b> is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a>:</p>
<blockquote class="doxtable">
<p>Copyright &copy; 2017 Matthew Rodusek</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</blockquote>
<h2>References</h2>
<ul>
<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p0323r9.html">P0323R9</a>: <code>std::expected</code> proposal was used as an inspiration for the general template structure.</li>
<li><a href="https://github.com/bitwizeshift/bit-stl/blob/20f41988d64e1c4820175e32b4b7478bcc3998b7/include/bit/stl/utilities/expected.hpp">bit::stl</a>: the original version that seeded this repository, based off an earlier proposal version. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
 <!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"></a>
    </li>
  </ul>
</div>
</body>
</html>